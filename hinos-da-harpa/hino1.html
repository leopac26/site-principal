import os
import re

# Caminho da pasta
pasta = r'D:\meus projetos de github\site-principal\hinos-da-harpa'

# Novo bloco completo que deve existir apenas uma vez
novo_bloco = '''
  </div>
  </div>
  </div>
  </div>'''

for nome_arquivo in os.listdir(pasta):
    if nome_arquivo.endswith('.html'):
        caminho_arquivo = os.path.join(pasta, nome_arquivo)

        with open(caminho_arquivo, 'r', encoding='utf-8') as arquivo:
            conteudo = arquivo.read()

        # Remove todas as divs de bot√µes duplicadas fora da #controls
        conteudo = re.sub(
            r'<div id="(scroll-down|scroll-toggle|scroll-reset|transpose-up|transpose-down|font-size-up|font-size-down)" class="control-button">.*?</div>\s*',
            '',
            conteudo
        )

        # Substitui o bloco de controles inteiro por um novo
        conteudo = re.sub(
            r'',
            novo_bloco,
            conteudo,
            flags=re.DOTALL
        )

        with open(caminho_arquivo, 'w', encoding='utf-8') as arquivo:
            arquivo.write(conteudo)

        print(f'Corrigido: {nome_arquivo}')
